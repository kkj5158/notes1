#API
### 참고자료 
[웹훅[Webhook]이란 무엇일까?](https://frtt0608.tistory.com/143)

# Call back or WebHook 이란? 

## Callback

Callback은 쉽게 말하자면 어떤 일을 다른 객체에게 시키고, 그 일이 끝나는 것은 기다리지 않고 끝나고 부를 때 까지 기다리는 것을 말한다, 즉 , 일이 언제 끝날지 모르니 " 야 너 일끝나면 '여기 URL로 연락해' 라고 말하는 것이 콜백(일 다 마치고 나중에 불러봐 ~! ) 의 개념이다." 이러한 방식은 Webhook 혹은 HTTP PUSH API라고도 불린다. 

## WebHook

웹훅은 웹페이지 or 웹앱에서 발생하는 특정 행동 (이벤트)들을 커스텀 Callback으로 변환해주는 방법으로 이러한 행동 정보들을 실시간으로 제공하는데 사용합니다. 

여기서 실시간이라는 단어를 잘 이해해야 한다. 실시간이란, 해당 앱에서 특정 이벤트가 일어나는 즉시 ,미리 지정해놓은 URL을 통해 다른 어플리케이션으로 이벤트 관련 정보를 보낸다는 의미이다. (Call back 과 동일개념이다! 다시 한번 개념적인 정의를 바탕으로 설명해봄. ! )

보통 REST API로 구축된 웹 서비스는 하나의 요청에 하나의 응답을 제공, 특정 이벤트의 발생여부를 파악하려면 서버로의 요청이 선행되어야 한다. 

### Webhook endpoint

웹훅이 이벤트 핸들러라면 웹 훅 엔드포인트는 발생한 이벤트가 어디로 전달되어야 하는가에 대한 것이다.  즉, **이벤트의 목적지인 Target**이 됩니다. 


### 웹훅의 구체적 사용예시

#### 은행의 인출 알림 시스템 

은행을 이용하는 고객들은 자신의 통장에서 돈이 인출되는 것을 실시간으로 보고 받아야한다. 그러기 위해서는 현금인출 시스템과 SMS를 관리하는 시스템이 긴밀하게 연결되어야 한다. 이때 웹훅을 사용한다. 

고객 계좌 관리 시스템에서 현금이 인출되었다는 이벤트가 발생하여
SMS 시스템 (웹훅 엔드포인트)에서 그 이벤트를 수신하여서 고객에게 '현금 2만원 출금되었습니다' 라는 문자를 쏴줄 수 있다. 

웹훅은 한마디로 이벤트에 대한 이벤트 핸들러다. 

이 이벤트 핸들러안에서 다른 시스템으로 어떤 이벤트가 발생했는지에 대한 정보를 JSON으로 POST 요청을 보내는 것이다. 


#### 슬랙 메시지 

슬랙 api에는 incoming webhooks 라는게 있다. 

외부 시스템에서 슬랙으로 post message를 쏴주기 위한 간단한 방법으로 생각하면된다. 만약 특정 시스템에서 장애가 발생하여서 해당 장애내용을 슬랙의 웹 훅 엔드포인트로 post message를 쏘게 되면 슬랙은 해당 장애내용을 채팅으로 뛰우는 방식인것이다. 

## 전형적인 API와의 차이점 

### Reverse [[API]]

일반적으로 , API (Polling) 은 클라이언트가 서버를 호출하는 방식이다. 하지만 웹훅은 서버에서 특정 이벤트가 발생했을 때 , 서버가 클라이언트를 역으로 호출하는 방식으로 역방향 API라고 불린다. 이렇게 서버측에서 클라이언트의 어떤 URL로 데이터를 보낼지 정해놓은 주소를 바로 CallBack URL 이라고 불러진다. 

![[webhook 비교.png]]




