#Architecture 
#### 참고자료 
[계층형 아키텍처](https://coldpresso.tistory.com/20)
# [[아키텍쳐]]의 기본 관심사 
## 아키텍쳐의 목적은 무엇인가 ? 
### 관심사의 분리 
소프트웨어 아키텍쳐의 가장 기본적인 관심사는 소프트웨어의 구성요소를 관심사에 따라 분리하는것이다. 이 관심사의 분리를 통해서. 
#### 구성요소의 관심사 축소에 따른 코드 가독성
#### 유지보수의 용이성 

이라는 2가지 장점을 얻을 수 있다. 
# 계층형 아키텍쳐
## 전통적인 아키텍쳐 먼저 살펴봅시다. 

![[Pasted image 20231220171515.png]]

가장 전통적인 아키텍쳐. 계층형 아키텍쳐는 같은 목적의 코드들을 같은 계층으로 그룹화환것으로, 역할과 관심사를 계층으로 분리합니다.

아마 대부분의 개발자가 다음과 같은 전통적인 계층형 아키텍쳐에 익숙할 것이다. 계층형 아키텍쳐는 계층을 다음과 같이 분리한다. 

### **1) Presentation Layer**

- 사용자와의 요청/응답 등 상호작용 처리에 관심사를 둔 계층

- View, Controller 등이 이 계층에 속할 수 있다.

---

### **2) Domain/Business Layer**

- 소프트웨어의 도메인 로직 처리에 관심사를 둔 계층

- 이 계층은 관점에 따라 두 계층으로 다시 구분되기도 한다. (도메인과 어플리케이션 서비스에 따라 구분된다.)

#### (1) Domain Layer

- 소프트웨어가 해결하고자 하는 문제 영역으로서 **도메인** 처리에 초점을 둔 계층

- 오직 도메인 처리에만 관심을 두며, 도메인 이외에 외부 인프라와의 통신이나 의존을 지양하는 계층

* 도메인 레이어는 서비스(어플리케이션) 레이어에 의존하지 않도록 구현하는 것이 좋다.(한 어플리케이션에 의존하면, 다른 어플리케이션에서는 활용할 수 없기 때문이다.)

#### (2) Application Service Layer

- 서비스 계층 혹은 어플리케이션 계층이라고 불리기도 한다.

- 도메인 처리를 위해 필요한 제반 작업 처리에 초점을 둔 계층

- ex.DB 등 다른 인프라와의 통신 / 트랜젝션 / 외부 API와 통신

---

### **3) Data Access Layer** (**Persistence Layer**)

- 데이터베이스에 직접적으로 요청을 전달하는 등 데이터베이스에 접근하는데 관심사를 둔 계층

- 데이터베이스와 매핑되는 객체로서의 엔티티를 영구히 관리하는 계층으로, **persistence(영속성) 계층**이라고도 불린다.

- ORM, repository, DAO가 이 계층에 속할 수 있다.

---

### **4) Database Layer**

- 실제 데이터베이스 서버가 운영되는 계층

- 사용하는 DB가 이 계층에 속한다.

## 계층형 아키텍쳐의 장/단점

### 특징 
계층형 아키텍쳐에서 각 계층은 다른 계층드리과의 낮은 결합도를 가지고 내부적으로는 높은 응집도를 가질 것을 지향한다. 이를 통해서 **코드 가독성** 과 **유지보수** 를 극대화 시킨다.  

이 말은 , 다음과 같다

- 상위 계층은 하위 계층을 파악할 수 있지만, 하위 계층은 상위계층을 파악할 수 없다. 
- 계층이 반드시 참조해야 하는 계층 이외에는 의존하지 않도록 하는 것이다. 

이 2가지 말은 계층이 서로 분리되어 있으므로 당연한 말이다. 

### 장점
#### 계층으로 완전히 서로 분리되어 있다가 모든 장점이다 ! 
- 소스코드의 가독성과 유지보수성 
- 모듈 교체의 용이성 (각 계층을 쉽게 갈아끼울 수 있다.)

### 단점
#### 계층형 아키텍쳐는 데이터베이스 주도 설계를 유도한다. 

계층형 아키텍쳐의 제일 토대에는 언제나 데이터베이스 layer가 존재하고, 이는 곧 설계의 토대가 데이터베이스에 있다고 볼 수 있는 것이다. 

모든 것이 데이터베이스에 기반하여서 만들어지게 된다. 
이는 너무나도 자연스럽게 개발자들의 개발과정에 섞여 들여가 의식하지 못할 수 있다. 하지만 지금까지의 개발과정을 돌아보자. 항상 우리가 서비스를 개발할 때 하는 일은 데이터베이스 테이블을 설계하는 일이다. 이는 비즈니스적인 관점에서는 맞지 않는 개발 방식이다. 

##### 비즈니스적인 관점 ? -> 도메인 설계 

데이터베이스를 우선적으로 설계한다는 말은 왜 비즈니스적인 설계가 아닌가에 대해서 고민해보자. 

#### 개발자들은 하위계층에서 개발하고 싶다는 나쁜 유혹에 빠집니다. 

계층형 아키텍쳐에 존재하는 유일한 제약조건은 하위 계층이 상위 계층에 접근하지 못한다는 점이다. 만약 하위계층에서 상위 계층을 접근하고 싶다면 컴포넌트를 한 계층 아래로 내려버리면 된다. 이러한 접근 방법을 우리는 (나쁜)지름길이라고 부른다. 

![[Pasted image 20231220175237.png]]


이건 너무나도 당연한 욕망이다. 

"데이터베이스 계층 ( 영속성 계층 ) 에서 부터 , 애플리케이션 계층(도메인/서비스 계층) 그 다음에는 프레젠테이션 레이어까지 어느 세월에 아래서부터 끌어올리냐"

는 생각이 개발자의 머리속을 스쳐가는 순간. 당연하게 

"그냥 데이터베이스 계층에서 바로 이용하자"

라는 유혹에 빠져들어가는 것이다. 

#### 뛰어넘어 버리고 싶다는 유혹에 빠지기도 합니다. 

![[Pasted image 20231220175337.png]]

같은 맥락이다. 프레젠테이션 계층에서 서비스계층을 통과하지 않고 영속성 계층으로부터 바로 데이터를 제공받는 일이 더욱 간단하기 때문에 개발자는 그냥 뛰어넘어 버린다. 

이러면 계층형 아키텍쳐의 가장 큰 장점인
- 명확환 계층의 분리 
- 그로 인한 모듈화 
가 무너져 내려버린다. 

## 보완하기 

### 이러한 문제를 해결하기 위해 클린 아키텍쳐를 고려한다.

#### [[클린 아키텍쳐]]

#### [[헥사고날 아키텍쳐]]
